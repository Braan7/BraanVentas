{% extends 'base.html' %}{% block content %}<h3>{{ categoria.nombre }}</h3><div class='row g-3'>{% for p in productos %}<div class='col-12 col-md-4'><div class='card bg-secondary-subtle text-dark'><div class='card-body'><h5 class='card-title'>{{ p.nombre }}</h5><p class='card-text small'>{{ p.descripcion }}</p><div class='d-flex align-items-center gap-2'><form method='post' action='{{ url_for('cart_add', pid=p.id) }}' onsubmit='return addToCart(event,this)' class='d-flex gap-2'><input name='qty' type='number' min='1' value='1' class='form-control form-control-sm' style='width:90px'><button class='btn btn-sm btn-primary'>Agregar ${{ '%.2f'|format(p.precio) }}</button></form></div></div></div></div>{% endfor %}</div><script>async function addToCart(e,form){e.preventDefault();const res=await fetch(form.action,{method:'POST',body:new FormData(form)});const data=await res.json();if(data.ok){alert('Agregado al carrito');}}</script>{% endblock %}